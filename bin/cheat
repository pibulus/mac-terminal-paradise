#!/bin/bash
# Pablo's Ultimate Interactive Terminal Cheatsheet
# Save this as ~/bin/cheat and chmod +x it

# Check if we're in an interactive environment
check_interactive() {
    if [[ ! -t 0 || ! -t 1 ]]; then
        return 1  # Not interactive
    fi
    if ! command -v gum >/dev/null 2>&1; then
        return 1  # gum not available
    fi
    # Test if gum can actually work
    if ! gum --help >/dev/null 2>&1; then
        return 1  # gum not functional
    fi
    return 0  # Interactive and gum works
}

# Colors
CYAN='\033[0;36m'
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
PURPLE='\033[0;35m'
RED='\033[0;31m'
BLUE='\033[0;34m'
NC='\033[0m' # No Color

# Track if user is new
FIRST_RUN_FILE="$HOME/.cheat_welcomed"

# Fallback menu for non-interactive environments
show_fallback_menu() {
    echo "ğŸ¯ PABLO'S TERMINAL CHEATSHEET"
    echo "=============================="
    echo ""
    echo "Available commands:"
    echo "  cheat help       - Show this menu"
    echo "  cheat ghostty    - Ghostty shortcuts"
    echo "  cheat git        - Git commands"
    echo "  cheat modern     - Modern CLI tools"
    echo "  cheat functions  - Custom functions"
    echo "  cheat svelte     - Svelte development"
    echo "  cheat test       - Test setup"
    echo ""
    echo "For full interactive experience:"
    echo "  1. Install gum: brew install gum"
    echo "  2. Run from a proper terminal (not IDE)"
    echo "  3. Ensure TTY is available"
}

# Welcome screen for first run
show_welcome() {
    if [ ! -f "$FIRST_RUN_FILE" ]; then
        if ! check_interactive; then
            show_fallback_menu
            return
        fi
        
        clear
        echo -e "${CYAN}"
        if command -v figlet >/dev/null && command -v lolcat >/dev/null; then
            figlet "Welcome!" | lolcat
        else
            echo "Welcome to your Terminal Superpower Guide!"
        fi
        echo -e "${NC}"
        
        gum style \
            --border double \
            --border-foreground 212 \
            --padding "1 2" \
            --margin "1" \
            --align center \
            "ğŸ‰ WELCOME TO YOUR TERMINAL SUPERPOWER GUIDE! ğŸ‰

This interactive guide will teach you everything about
your amazing terminal setup. Let's start with a quick tour!"
        
        echo ""
        if gum confirm "Ready for the tour?"; then
            show_quick_tour
        fi
        touch "$FIRST_RUN_FILE"
    fi
}

# Quick tour for new users
show_quick_tour() {
    clear
    gum style \
        --border rounded \
        --border-foreground 99 \
        --padding "1 2" \
        "ğŸš€ QUICK TOUR - 5 ESSENTIAL COMMANDS

1. z [folder] â†’ Jump to ANY folder instantly
   Try: z down â†’ Goes to Downloads!

2. Cmd+\` â†’ Summon terminal from ANYWHERE
   This is your new superpower!

3. lazygit â†’ Visual git (in any git folder)
   Never type git commands again!

4. fzf â†’ Find ANYTHING instantly
   Ctrl+R for history, Ctrl+T for files

5. btop â†’ Beautiful system monitor
   Press 'p' to change themes!"
    
    echo ""
    gum input --placeholder "Press enter to continue..."
}

# Main menu function
show_menu() {
    # Handle command line arguments for fallback mode
    if [[ $# -gt 0 ]]; then
        case "$1" in
            "help"|"--help"|"")
                show_fallback_menu
                return
                ;;
            "ghostty")
                show_ghostty_shortcuts_text
                return
                ;;
            "git")
                show_git_commands_text
                return
                ;;
            "modern")
                show_modern_tools_text
                return
                ;;
            "functions")
                show_functions_aliases_text
                return
                ;;
            "svelte")
                show_svelte_dev_text
                return
                ;;
            "test")
                test_setup_text
                return
                ;;
        esac
    fi
    
    if ! check_interactive; then
        show_fallback_menu
        return
    fi
    
    clear
    echo -e "${CYAN}"
    if command -v figlet >/dev/null && command -v lolcat >/dev/null; then
        figlet "Cheat Menu" | lolcat
    else
        echo "=== CHEAT MENU ==="
    fi
    echo -e "${NC}"
    
    CHOICE=$(gum choose \
        "ğŸ® Ghostty Shortcuts" \
        "âš¡ Custom Keybindings (Your Secret Weapons)" \
        "ğŸ¹ TMUX-Style Commands (Cmd+B)" \
        "ğŸ“ File Navigation" \
        "ğŸ¨ Fun & Visual Commands" \
        "ğŸ”¥ Git Commands" \
        "ğŸ› ï¸ System Monitoring" \
        "ğŸ–¼ï¸ Image & Media Tools" \
        "âŒ¨ï¸ Terminal Shortcuts" \
        "ğŸŒŸ Modern CLI Tools (Your Replacements)" \
        "ğŸ“ Functions & Aliases" \
        "ğŸ¯ Interactive Tutorials" \
        "ğŸ” Search Everything" \
        "ğŸ“š Full Cheatsheet" \
        "ğŸŒˆ Show Me Something Cool" \
        "ğŸ’¡ Daily Power Tip" \
        "ğŸš€ Svelte Development" \
        "ğŸ“¦ Dotfiles Management" \
        "ğŸ§ª Test My Setup" \
        "âŒ Exit")
    
    case "$CHOICE" in
        "ğŸ® Ghostty Shortcuts")
            show_ghostty_shortcuts
            ;;
        "âš¡ Custom Keybindings (Your Secret Weapons)")
            show_custom_keybindings
            ;;
        "ğŸ¹ TMUX-Style Commands (Cmd+B)")
            show_tmux_commands
            ;;
        "ğŸ“ File Navigation")
            show_file_navigation
            ;;
        "ğŸ¨ Fun & Visual Commands")
            show_fun_commands
            ;;
        "ğŸ”¥ Git Commands")
            show_git_commands
            ;;
        "ğŸ› ï¸ System Monitoring")
            show_system_tools
            ;;
        "ğŸ–¼ï¸ Image & Media Tools")
            show_image_tools
            ;;
        "âŒ¨ï¸ Terminal Shortcuts")
            show_terminal_shortcuts
            ;;
        "ğŸŒŸ Modern CLI Tools (Your Replacements)")
            show_modern_tools
            ;;
        "ğŸ“ Functions & Aliases")
            show_functions_aliases
            ;;
        "ğŸ¯ Interactive Tutorials")
            show_tutorials_menu
            ;;
        "ğŸ” Search Everything")
            show_search_menu
            ;;
        "ğŸ“š Full Cheatsheet")
            glow ~/terminal-cheatsheet.md | less
            ;;
        "ğŸŒˆ Show Me Something Cool")
            show_something_cool
            ;;
        "ğŸ’¡ Daily Power Tip")
            show_power_tip
            ;;
            "ğŸš€ Svelte Development")
            show_svelte_dev
            ;;
        "ğŸ“¦ Dotfiles Management")
            show_dotfiles_management
            ;;
        "ğŸ§ª Test My Setup")
            test_setup
            ;;
        "âŒ Exit")
            echo "Remember: type 'cheat' anytime to come back! ğŸ‘‹"
            exit 0
            ;;
    esac
    
    echo ""
    gum confirm "Back to menu?" && show_menu
}

# NEW: Custom keybindings section
show_custom_keybindings() {
    gum style \
        --border double \
        --border-foreground 212 \
        --padding "1 2" \
        --margin "1" \
        "âš¡ YOUR CUSTOM KEYBINDINGS - SECRET WEAPONS!

ğŸ” SEARCH & EDIT
Ctrl+F  â†’ Find file & edit it instantly!
Ctrl+T  â†’ FZF file search
Ctrl+R  â†’ Search command history (fuzzy!)
Alt+C   â†’ Change directory with preview

ğŸ“ GIT INTEGRATION  
Ctrl+G  â†’ Interactive git status
         (select files, see diffs!)

ğŸš€ QUICK ACTIONS
Ctrl+P  â†’ Find & kill processes
Alt+D   â†’ Jump to recent directories (zi)
ESC ESC â†’ Add 'sudo' to command!

ğŸ’¡ HISTORY MAGIC
â†‘/â†“     â†’ Search history by what you typed
         (type 'git' then â†‘ for git commands!)

âš ï¸  THESE ARE YOUR UNIQUE POWERS!
Most people don't have these - you do!"
    
    echo ""
    if gum confirm "Want to try Ctrl+F now?"; then
        echo "Press Ctrl+F to find and edit a file!"
        read -n 1
    fi
}

# NEW: Modern tools section
show_modern_tools() {
    gum style \
        --border double \
        --border-foreground 87 \
        --padding "1 2" \
        --margin "1" \
        "ğŸŒŸ YOUR MODERN CLI REPLACEMENTS

OLD â†’ NEW (What you have!)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
cat   â†’ bat      (syntax highlighting!)
ls    â†’ eza      (icons + git status!)
find  â†’ fd       (5x faster!)
grep  â†’ rg       (ripgrep - blazing fast!)
cd    â†’ z        (smart jumps!)
top   â†’ btop     (beautiful graphs!)
htop  â†’ btop     (even better!)
ps    â†’ procs    (intuitive output!)
du    â†’ dust     (visual disk usage!)
df    â†’ duf      (disk usage that makes sense!)
man   â†’ tldr     (examples first!)
diff  â†’ delta    (side-by-side diffs!)
dig   â†’ dog      (colorful DNS!)
ping  â†’ gping    (graph your ping!)

ğŸ¯ QUICK TEST
Try these NOW to see the difference:
â€¢ ls vs eza --icons
â€¢ cat file vs bat file
â€¢ ps vs procs"
    
    echo ""
    DEMO=$(gum choose "Compare ls vs eza" "Compare cat vs bat" "Compare ps vs procs" "Skip demo")
    case "$DEMO" in
        "Compare ls vs eza")
            echo -e "${YELLOW}Old ls:${NC}"
            ls -la | head -10
            echo -e "\n${GREEN}Your eza:${NC}"
            eza -la --icons | head -10
            gum input --placeholder "See the difference? Press enter..."
            ;;
        "Compare cat vs bat")
            echo "cat ~/.zshrc:" 
            cat ~/.zshrc | head -20
            echo -e "\n${GREEN}bat ~/.zshrc:${NC}"
            bat ~/.zshrc --line-range=1:20
            ;;
        "Compare ps vs procs")
            echo -e "${YELLOW}Old ps:${NC}"
            ps aux | head -10
            echo -e "\n${GREEN}Your procs:${NC}"
            procs | head -10
            ;;
    esac
}

# NEW: Functions and aliases section
show_functions_aliases() {
    gum style \
        --border double \
        --border-foreground 214 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ“ YOUR CUSTOM FUNCTIONS & ALIASES

ğŸš€ QUICK SHORTCUTS
reload    â†’ Reload your terminal config
zshrc     â†’ Edit your .zshrc
mkcd      â†’ Make directory AND enter it
backup    â†’ Backup file with timestamp
extract   â†’ Extract ANY archive type
ginit     â†’ Start git repo with .gitignore
targz     â†’ Create tar.gz archive
note      â†’ Add a quick note
notes     â†’ View all your notes
weather   â†’ Get weather (weather Tokyo)
cht       â†’ Cheatsheet for any command

ğŸ“‚ SMART NAVIGATION  
..        â†’ cd ..
...       â†’ cd ../..
-         â†’ cd to previous directory
~         â†’ cd to home

ğŸŒ NETWORK
myip      â†’ Your public IP
localip   â†’ Your local IP  
ports     â†’ Show listening ports
serve     â†’ Start Python web server
speedtest â†’ Test internet speed

ğŸ’¡ TRY THIS
Type 'mkcd test-folder' - it creates AND enters!"
    
    echo ""
    if gum confirm "Try mkcd now?"; then
        FOLDER=$(gum input --placeholder "Folder name to create...")
        if [ -n "$FOLDER" ]; then
            mkcd "$FOLDER"
            echo "You're now in: $(pwd)"
            echo "Type 'cd -' to go back!"
            gum input --placeholder "Press enter..."
        fi
    fi
}

# NEW: Interactive tutorials menu
show_tutorials_menu() {
    TUTORIAL=$(gum choose \
        "ğŸš€ Master FZF (Fuzzy Finding)" \
        "ğŸ“ Master Zoxide (Smart CD)" \
        "ğŸ¨ Master Eza (Beautiful LS)" \
        "ğŸ”¥ Master Lazygit" \
        "âš¡ Master Terminal Navigation" \
        "ğŸ¯ Build a Quick Workflow" \
        "Back to menu")
    
    case "$TUTORIAL" in
        "ğŸš€ Master FZF (Fuzzy Finding)")
            tutorial_fzf
            ;;
        "ğŸ“ Master Zoxide (Smart CD)")
            tutorial_zoxide
            ;;
        "ğŸ¨ Master Eza (Beautiful LS)")
            tutorial_eza
            ;;
        "ğŸ”¥ Master Lazygit")
            tutorial_lazygit
            ;;
        "âš¡ Master Terminal Navigation")
            tutorial_navigation
            ;;
        "ğŸ¯ Build a Quick Workflow")
            tutorial_workflow
            ;;
    esac
}

# FZF Tutorial
tutorial_fzf() {
    clear
    gum style \
        --border rounded \
        --border-foreground 99 \
        --padding "1 2" \
        "ğŸš€ FZF MASTERY COURSE

FZF = Fuzzy Finder = Find ANYTHING instantly!

LESSON 1: Basic FZF"
    
    echo ""
    gum confirm "Ready to try fzf?" && {
        echo "Type 'fzf' and press enter. Type to filter, arrows to select, enter to choose:"
        fzf
    }
    
    echo ""
    gum style \
        --border rounded \
        --border-foreground 99 \
        --padding "1 2" \
        "LESSON 2: Power Shortcuts

Ctrl+T â†’ Find any file (with preview!)
Ctrl+R â†’ Search ALL your command history
Alt+C  â†’ cd to any directory

TRY IT: Press Ctrl+R right now!"
    
    gum input --placeholder "Try Ctrl+R, then press enter to continue..."
    
    gum style \
        --border rounded \
        --border-foreground 99 \
        --padding "1 2" \
        "LESSON 3: Advanced FZF

# Find and edit files
vim \$(fzf)

# Kill processes interactively  
kill -9 \$(ps aux | fzf | awk '{print \$2}')

# Git branch switching
git checkout \$(git branch | fzf)

# Search file contents
rg --files | fzf --preview 'bat {}'"
    
    echo ""
    gum input --placeholder "You're now an FZF master! Press enter..."
}

# Zoxide tutorial
tutorial_zoxide() {
    clear
    gum style \
        --border rounded \
        --border-foreground 214 \
        --padding "1 2" \
        "ğŸ“ ZOXIDE MASTERY - CD ON STEROIDS!

Zoxide learns your habits and lets you jump anywhere!

LESSON 1: Basic Usage
Instead of: cd ~/Documents/Projects/my-app
Just type:  z my-app

Instead of: cd ../../../Downloads
Just type:  z down"
    
    echo ""
    echo "Your most visited directories:"
    zoxide query -l | head -10
    
    echo ""
    if command -v zi >/dev/null 2>&1; then
        gum confirm "Want to see interactive mode?" && {
            echo "Type 'zi' for interactive selection:"
            echo "(Press Ctrl+C if you want to cancel)"
            zi
        }
    else
        echo "Interactive mode requires zoxide to be properly configured"
    fi
    
    gum style \
        --border rounded \
        --border-foreground 214 \
        --padding "1 2" \
        "ADVANCED TIPS:

z foo       â†’ Jump to best match with 'foo'
z foo bar   â†’ Jump to best match with 'foo' AND 'bar'
zi          â†’ Interactive selection
z -         â†’ Go back to previous directory

POWER MOVE: Combine with fzf!
z \$(fd -t d | fzf)  â†’ Choose from ALL directories!"
}

# Search menu
show_search_menu() {
    SEARCH_TYPE=$(gum choose \
        "ğŸ“„ Search in files (ripgrep)" \
        "ğŸ“ Search filenames (fd)" \
        "ğŸ“š Search cheatsheet" \
        "ğŸ”™ Back")
    
    case "$SEARCH_TYPE" in
        "ğŸ“„ Search in files (ripgrep)")
            PATTERN=$(gum input --placeholder "Search pattern...")
            if [ -n "$PATTERN" ]; then
                echo "Searching for '$PATTERN'..."
                rg "$PATTERN" --color=always | head -20
            fi
            ;;
        "ğŸ“ Search filenames (fd)")
            PATTERN=$(gum input --placeholder "Filename pattern...")
            if [ -n "$PATTERN" ]; then
                fd "$PATTERN" --color=always | head -20
            fi
            ;;
        "ğŸ“š Search cheatsheet")
            search_cheatsheet
            ;;
    esac
    gum input --placeholder "Press enter to continue..."
}

# Power tip of the day
show_power_tip() {
    TIPS=(
        "ğŸš€ TIP: Press 'v' in lazygit to edit files directly!"
        "âš¡ TIP: Type '!!' to run your last command again!"
        "ğŸ¯ TIP: Use 'Alt+.' to insert the last argument from previous command!"
        "ğŸ’¡ TIP: Type 'fuck' after a failed command to fix it!"
        "ğŸ”¥ TIP: In fzf, use 'Ctrl+/' to toggle preview window!"
        "ğŸ“ TIP: Type '-' to go back to previous directory!"
        "ğŸ¨ TIP: Run 'btop' and press 'p' to cycle through themes!"
        "âŒ¨ï¸ TIP: Start typing and press â†’ to accept autosuggestion!"
        "ğŸŒŸ TIP: Use 'gw' to switch between git worktrees!"
        "ğŸ“Š TIP: Run 'duf' for beautiful disk usage info!"
        "ğŸ” TIP: Use 'tldr <command>' for quick examples!"
        "ğŸš€ TIP: Press Ctrl+G for interactive git status!"
        "ğŸ’¾ TIP: Use 'backup <file>' to create timestamped backup!"
        "ğŸ¯ TIP: Type 'zi' for interactive directory jumping!"
        "âš¡ TIP: Double-tap ESC to add 'sudo' to your command!"
    )
    
    # Show a random tip with style
    TIP="${TIPS[$RANDOM % ${#TIPS[@]}]}"
    
    clear
    echo -e "${CYAN}"
    figlet "Power Tip!" | lolcat
    echo -e "${NC}"
    
    gum style \
        --border double \
        --border-foreground 212 \
        --padding "2 4" \
        --margin "1" \
        --align center \
        "$TIP"
    
    echo ""
    echo "Want to try it? Go ahead!"
    gum input --placeholder "Press enter for another tip..." && show_power_tip
}

# Enhanced git commands
show_git_commands() {
    gum style \
        --border double \
        --border-foreground 208 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ”¥ GIT COMMAND MASTERY

ğŸ¯ VISUAL TOOLS (Recommended!)
lazygit       â†’ Full git UI (BEST!)
tig           â†’ Alternative git UI
gitui         â†’ Another great option

âš¡ YOUR SHORTCUTS
gs   â†’ git status        gp   â†’ git push
ga   â†’ git add          gpl  â†’ git pull  
gaa  â†’ git add .        gco  â†’ git checkout
gc   â†’ git commit       gb   â†’ git branch
gcm  â†’ git commit -m    glog â†’ pretty git log
gdiff â†’ git diff (colored)
gw   â†’ switch git worktrees (NEW!)

ğŸš€ POWER COMMANDS
ginit         â†’ Initialize repo with .gitignore
git add -p    â†’ Stage specific parts
git bisect    â†’ Find bug introductions
git stash     â†’ Save work temporarily
git reflog    â†’ Undo ANYTHING

ğŸ’¡ WORKFLOW TIPS
1. Use lazygit for everything!
2. Press Ctrl+G for quick status
3. Use 'gw' for worktree switching"
    
    echo ""
    if gum confirm "Open lazygit tutorial?"; then
        tutorial_lazygit
    fi
}

# Lazygit tutorial
tutorial_lazygit() {
    clear
    gum style \
        --border rounded \
        --border-foreground 208 \
        --padding "1 2" \
        "ğŸ”¥ LAZYGIT QUICK TUTORIAL

MAIN PANELS:
â€¢ Status (top left)
â€¢ Files (left)
â€¢ Diff (right)
â€¢ Commands (bottom)

KEY SHORTCUTS:
Space  â†’ Stage/unstage file
c      â†’ Commit
p      â†’ Push
P      â†’ Pull
b      â†’ Branches
s      â†’ Stash
?      â†’ Help (IMPORTANT!)

POWER MOVES:
a      â†’ Stage all
d      â†’ Delete/discard
e      â†’ Edit file
v      â†’ Open in editor
x      â†’ Open menu
]      â†’ Next tab
[      â†’ Previous tab"
    
    echo ""
    if [ -d .git ]; then
        gum confirm "This is a git repo! Open lazygit?" && lazygit
    else
        echo "Not in a git repo. Navigate to one and type 'lazygit'!"
    fi
}

# Enhanced show_something_cool with more options
show_something_cool() {
    COOL=$(gum choose \
        "ğŸ¬ Matrix + Clock + System Split Screen" \
        "ğŸ¨ Custom ASCII Art Banner" \
        "ğŸŒˆ Rainbow Terminal Party" \
        "ğŸ“Š System Stats Dashboard" \
        "ğŸµ Music Visualizer" \
        "ğŸŒ¤ï¸ Weather + Moon Phase" \
        "ğŸ² Terminal Game" \
        "ğŸ’° Crypto Prices" \
        "ğŸ¦œ Parrot Party")
    
    case "$COOL" in
        "ğŸ¬ Matrix + Clock + System Split Screen")
            # Try to use tmux for split screen effect
            if command -v tmux >/dev/null; then
                tmux new-session \; \
                    split-window -h \; \
                    split-window -v \; \
                    send-keys 'cmatrix -b' C-m \; \
                    select-pane -t 0 \; \
                    send-keys 'btop' C-m \; \
                    select-pane -t 2 \; \
                    send-keys 'tty-clock -c -C 4' C-m
            else
                echo "Install tmux for the full effect!"
                cmatrix -b
            fi
            ;;
        "ğŸ¨ Custom ASCII Art Banner")
            NAME=$(gum input --placeholder "Enter your name..." --value "PABLO")
            echo "$NAME" | figlet -f slant | lolcat
            echo "is" | figlet -f small | lolcat
            echo "AWESOME" | figlet -f big | lolcat
            ;;
        "ğŸŒˆ Rainbow Terminal Party")
            echo "ğŸ‰ PARTY MODE ACTIVATED ğŸ‰" | figlet | lolcat
            fortune | ponysay | lolcat
            echo ""
            echo "Press Ctrl+C to stop the party..."
            while true; do
                echo "ğŸ‰ ğŸˆ ğŸŠ ğŸ† ğŸ‡ âœ¨ ğŸ‰ ğŸˆ ğŸŠ ğŸ† ğŸ‡ âœ¨" | lolcat
                sleep 0.1
            done
            ;;
        "ğŸ“Š System Stats Dashboard")
            clear
            neofetch
            echo ""
            echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" | lolcat
            echo "Disk Usage:" | lolcat
            duf
            echo ""
            echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”" | lolcat
            echo "Network:" | lolcat
            echo "Public IP: $(curl -s --connect-timeout 5 --max-time 10 ifconfig.me 2>/dev/null || echo 'unavailable')"
            echo "Local IP: $(ipconfig getifaddr en0 2>/dev/null || echo 'unavailable')"
            ;;
        "ğŸµ Music Visualizer")
            echo "ğŸµ Make sure music is playing! ğŸµ" | figlet -f small | lolcat
            cava
            ;;
        "ğŸŒ¤ï¸ Weather + Moon Phase")
            weather
            echo ""
            curl -s --connect-timeout 5 --max-time 10 wttr.in/Moon 2>/dev/null || echo "Moon phase service unavailable"
            ;;
        "ğŸ² Terminal Game")
            echo "Let's play a game!" | cowsay | lolcat
            echo ""
            GAME=$(gum choose "ğŸ¯ Guess the number" "ğŸ® ASCII Invaders" "ğŸƒ Run from the train")
            case "$GAME" in
                "ğŸ¯ Guess the number")
                    NUMBER=$((RANDOM % 100 + 1))
                    TRIES=0
                    echo "I'm thinking of a number between 1 and 100..."
                    while true; do
                        GUESS=$(gum input --placeholder "Your guess...")
                        ((TRIES++))
                        if [[ $GUESS -eq $NUMBER ]]; then
                            echo "ğŸ‰ Correct! It took you $TRIES tries!" | lolcat
                            break
                        elif [[ $GUESS -lt $NUMBER ]]; then
                            echo "ğŸ“ˆ Higher!"
                        else
                            echo "ğŸ“‰ Lower!"
                        fi
                    done
                    ;;
                "ğŸ® ASCII Invaders")
                    echo "Coming soon! For now, try: brew install ninvaders"
                    ;;
                "ğŸƒ Run from the train")
                    sl
                    ;;
            esac
            ;;
        "ğŸ’° Crypto Prices")
            if command -v figlet >/dev/null && command -v lolcat >/dev/null; then
                echo "ğŸ’° CRYPTO PRICES ğŸ’°" | figlet -f small | lolcat
            else
                echo "ğŸ’° CRYPTO PRICES ğŸ’°"
            fi
            curl -s --connect-timeout 5 --max-time 10 rate.sx/btc 2>/dev/null || echo "Bitcoin price unavailable"
            echo ""
            curl -s --connect-timeout 5 --max-time 10 rate.sx/eth 2>/dev/null || echo "Ethereum price unavailable"
            ;;
        "ğŸ¦œ Parrot Party")
            curl --connect-timeout 5 --max-time 15 parrot.live 2>/dev/null || echo "ğŸ¦œ Parrot party is taking a break!"
            ;;
    esac
    echo ""
    gum input --placeholder "Press enter to continue..."
}



# Enhanced fun commands with more demos
show_fun_commands() {
    gum style \
        --border double \
        --border-foreground 205 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ¨ FUN & VISUAL COMMANDS

ğŸŒˆ VISUAL EFFECTS
cmatrix       â†’ Matrix rain
pipes-sh      â†’ Animated pipes
rain          â†’ Rain effect
asciiquarium  â†’ Fish tank
sl            â†’ Choo choo train!
neko          â†’ Cat follows cursor
cava          â†’ Audio visualizer
tty-clock -c  â†’ Digital clock

ğŸ­ TEXT ART
figlet text   â†’ Big ASCII text
toilet text   â†’ Colorful ASCII
cowsay text   â†’ Cow speaks
ponysay text  â†’ Pony speaks
fortune       â†’ Random quotes
lolcat        â†’ Rainbowify text

ğŸ“Š SYSTEM BEAUTY
neofetch      â†’ System + ASCII logo
pfetch        â†’ Minimal version
btop          â†’ Beautiful monitoring

ğŸ® COMBINATIONS
fortune | cowsay | lolcat
figlet PABLO | lolcat
echo 'Hello' | toilet -f mono12 | lolcat"
    
    echo ""
    DEMO=$(gum choose \
        "ğŸŒ§ï¸ Matrix Rain" \
        "ğŸ  Aquarium" \
        "ğŸš‚ Punishment Train" \
        "ğŸ¨ Text Art Combo" \
        "ğŸŒˆ Rainbow Fortune" \
        "ğŸ’» System Info" \
        "ğŸµ Audio Visualizer" \
        "Skip demos")
    
    case "$DEMO" in
        "ğŸŒ§ï¸ Matrix Rain")
            timeout 5s cmatrix -b -C cyan
            ;;
        "ğŸ  Aquarium")
            timeout 10s asciiquarium
            ;;
        "ğŸš‚ Punishment Train")
            sl
            ;;
        "ğŸ¨ Text Art Combo")
            echo "PABLO" | figlet | lolcat
            echo "IS" | toilet -f mono12 | lolcat
            echo "AWESOME" | cowsay | lolcat
            ;;
        "ğŸŒˆ Rainbow Fortune")
            fortune | ponysay | lolcat
            ;;
        "ğŸ’» System Info")
            neofetch
            ;;
        "ğŸµ Audio Visualizer")
            echo "Play some music and watch!"
            timeout 10s cava
            ;;
    esac
    gum input --placeholder "Press enter to continue..."
}

# Workflow tutorial
tutorial_workflow() {
    clear
    gum style \
        --border rounded \
        --border-foreground 212 \
        --padding "1 2" \
        "ğŸ¯ BUILD YOUR POWER WORKFLOW

Let's combine everything you've learned!

SCENARIO: Starting a new project"
    
    echo ""
    gum confirm "Ready to see a pro workflow?" && {
        echo -e "${GREEN}Step 1: Create and enter directory${NC}"
        echo "$ mkcd my-awesome-project"
        
        echo -e "\n${GREEN}Step 2: Initialize git${NC}"
        echo "$ ginit"
        
        echo -e "\n${GREEN}Step 3: Create some files${NC}"
        echo "$ touch README.md index.js"
        
        echo -e "\n${GREEN}Step 4: Open in editor (Ctrl+F to find files)${NC}"
        echo "$ code ."
        
        echo -e "\n${GREEN}Step 5: Use lazygit for version control${NC}"
        echo "$ lazygit"
        
        echo -e "\n${GREEN}Step 6: Quick commit${NC}"
        echo "$ gcm 'Initial commit'"
        
        echo -e "\n${GREEN}Step 7: Jump back anytime${NC}"
        echo "$ z awesome"
    }
    
    gum input --placeholder "You're ready! Press enter..."
}

# Ghostty shortcuts (updated)
show_ghostty_shortcuts() {
    gum style \
        --border double \
        --border-foreground 212 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ® GHOSTTY SHORTCUTS - COMPLETE GUIDE

ğŸš€ QUICK TERMINAL
Cmd+\`         â†’ Toggle quick terminal (ANYWHERE!)
                 This is your #1 superpower!

ğŸ“ SPLITS & TABS
Cmd+D         â†’ Split right
Cmd+Shift+D   â†’ Split down
Cmd+T         â†’ New tab
Cmd+W         â†’ Close current
Cmd+[1-9]     â†’ Jump to tab
Cmd+Shift+[/] â†’ Previous/next tab

ğŸ¯ NAVIGATION
Cmd+â†/â†’/â†‘/â†“   â†’ Navigate splits
Cmd+H/J/K/L   â†’ Navigate (vim style) [NEW!]
Mouse hover   â†’ Focus follows mouse!
Cmd+Shift+Z   â†’ Zoom/unzoom split
Cmd+Shift+E   â†’ Equalize splits

âš™ï¸ CONTROLS
Cmd+K         â†’ Clear screen
Cmd+R         â†’ Reload config instantly
Cmd+Plus/Min  â†’ Zoom in/out
Cmd+0         â†’ Reset zoom
Cmd+F         â†’ Find in terminal
Cmd+G/Shift+G â†’ Find next/previous
Cmd+I         â†’ Inspector (debug)

ğŸ¨ APPEARANCE
Cmd+Shift+F   â†’ Fullscreen
Your theme    â†’ UltraViolent (sick!)
Your font     â†’ JetBrains Mono"
    
    echo ""
    if gum confirm "Test quick terminal? (Press Cmd+\` after)"; then
        echo "Minimize this window, then press Cmd+\` from any app!"
        echo "It's your instant terminal from anywhere!"
        gum input --placeholder "Press enter when you've tried it..."
    fi
}

# Svelte Development Section
show_svelte_dev() {
    gum style \
        --border double \
        --border-foreground 214 \
        --padding "1 2" \
        --margin "1" \
        "ğŸš€ SVELTE DEVELOPMENT COMMANDS

ğŸ“¦ PROJECT STARTERS
sv        â†’ Create Vite + Svelte app
svkit     â†’ Create SvelteKit app
sva       â†’ Svelte adders (Tailwind, etc)

âš¡ DEVELOPMENT SHORTCUTS
dev       â†’ npm run dev
build     â†’ npm run build
preview   â†’ npm run preview
check     â†’ npm run check
format    â†’ Format with prettier
lint      â†’ Run ESLint

ğŸ› ï¸ PNPM COMMANDS (Faster npm!)
pn        â†’ pnpm
pni       â†’ pnpm install
pnd       â†’ pnpm dev
pnb       â†’ pnpm build

ğŸ¯ CUSTOM FUNCTIONS
mkcomp    â†’ Create Svelte component
          Usage: mkcomp Button
          Creates: src/lib/components/Button/Button.svelte

servethis â†’ Quick static server
openproject â†’ Open browser at dev URL

ğŸ“ PROJECT STRUCTURE
src/
â”œâ”€â”€ lib/          # Reusable components
â”œâ”€â”€ routes/       # SvelteKit pages
â”œâ”€â”€ app.html      # HTML template
â””â”€â”€ app.css       # Global styles

ğŸ’¡ WORKFLOW TIPS
1. Use 'sv' to start new project
2. Always use pnpm (faster!)
3. Press Cmd+\` for quick terminal
4. Use lazygit for version control"
    
    echo ""
    if gum confirm "Create a sample Svelte component?"; then
        COMP_NAME=$(gum input --placeholder "Component name (e.g., Button)...")
        if [ -n "$COMP_NAME" ]; then
            echo "Would create: src/lib/components/$COMP_NAME/$COMP_NAME.svelte"
            echo "With props, styles, and TypeScript ready!"
        fi
    fi
}

# Dotfiles Management Section
show_dotfiles_management() {
    gum style \
        --border double \
        --border-foreground 99 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ“¦ DOTFILES MANAGEMENT

ğŸ“‚ YOUR SETUP
Location: ~/dotfiles
GitHub: github.com/pibulus/dotfiles
Install: ./install.sh

ğŸ”„ UPDATING DOTFILES
1. Edit any config file
2. cd ~/dotfiles
3. git add .
4. git commit -m 'Update X'
5. git push

ğŸ“ KEY FILES
.zshrc              â†’ Shell config
.gitconfig          â†’ Git settings
.config/starship.toml â†’ Prompt
.config/ghostty/    â†’ Terminal
Brewfile            â†’ All your tools
bin/cheat           â†’ This menu!

ğŸ†• ADDING NEW TOOLS
1. brew install toolname
2. brew bundle dump --force
3. Commit updated Brewfile

ğŸ”§ TESTING ON NEW MACHINE
git clone https://github.com/pibulus/dotfiles ~/dotfiles
cd ~/dotfiles
./install.sh

ğŸ’¡ QUICK EDITS
zshrc     â†’ Edit shell config
reload    â†’ Reload shell
ghosttyconf â†’ Edit terminal

âš ï¸ REMEMBER
- Commit often
- Write good commit messages
- Update README when adding features"
    
    echo ""
    if gum confirm "Check dotfiles status?"; then
        cd ~/dotfiles
        echo -e "${GREEN}Git Status:${NC}"
        git status --short
        echo -e "\n${GREEN}Last 5 commits:${NC}"
        git log --oneline -5
        cd - > /dev/null
    fi
}

# Test Setup Function
test_setup() {
    clear
    echo -e "${CYAN}"
    figlet "Setup Test" | lolcat
    echo -e "${NC}"
    
    echo "ğŸ§ª Testing Pablo's Terminal Setup..."
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    
    # Test essential commands
    echo -e "\n${YELLOW}Essential Tools:${NC}"
    command -v brew >/dev/null && echo "âœ… Homebrew" || echo "âŒ Homebrew"
    command -v git >/dev/null && echo "âœ… Git" || echo "âŒ Git"
    command -v zsh >/dev/null && echo "âœ… Zsh" || echo "âŒ Zsh"
    
    # Test modern CLI tools
    echo -e "\n${YELLOW}Modern CLI Tools:${NC}"
    command -v bat >/dev/null && echo "âœ… bat (better cat)" || echo "âŒ bat"
    command -v eza >/dev/null && echo "âœ… eza (better ls)" || echo "âŒ eza"
    command -v fd >/dev/null && echo "âœ… fd (better find)" || echo "âŒ fd"
    command -v rg >/dev/null && echo "âœ… ripgrep (better grep)" || echo "âŒ ripgrep"
    command -v fzf >/dev/null && echo "âœ… fzf (fuzzy finder)" || echo "âŒ fzf"
    command -v zoxide >/dev/null && echo "âœ… zoxide (smart cd)" || echo "âŒ zoxide"
    command -v btop >/dev/null && echo "âœ… btop (system monitor)" || echo "âŒ btop"
    command -v lazygit >/dev/null && echo "âœ… lazygit" || echo "âŒ lazygit"
    command -v delta >/dev/null && echo "âœ… delta (git diffs)" || echo "âŒ delta"
    
    # Test development tools
    echo -e "\n${YELLOW}Development Tools:${NC}"
    command -v node >/dev/null && echo "âœ… Node.js $(node --version)" || echo "âŒ Node.js"
    command -v pnpm >/dev/null && echo "âœ… pnpm" || echo "âŒ pnpm"
    command -v code >/dev/null && echo "âœ… VS Code" || echo "âŒ VS Code"
    
    # Test fun tools
    echo -e "\n${YELLOW}Fun Tools:${NC}"
    command -v cmatrix >/dev/null && echo "âœ… cmatrix" || echo "âŒ cmatrix"
    command -v asciiquarium >/dev/null && echo "âœ… asciiquarium" || echo "âŒ asciiquarium"
    command -v figlet >/dev/null && echo "âœ… figlet" || echo "âŒ figlet"
    command -v lolcat >/dev/null && echo "âœ… lolcat" || echo "âŒ lolcat"
    
    # Test configs
    echo -e "\n${YELLOW}Configuration Files:${NC}"
    [ -f ~/.zshrc ] && echo "âœ… .zshrc" || echo "âŒ .zshrc"
    [ -f ~/.gitconfig ] && echo "âœ… .gitconfig" || echo "âŒ .gitconfig"
    [ -f ~/.config/starship.toml ] && echo "âœ… Starship config" || echo "âŒ Starship"
    [ -f "$HOME/Library/Application Support/com.mitchellh.ghostty/config" ] && echo "âœ… Ghostty config" || echo "âŒ Ghostty"
    
    # Test custom commands
    echo -e "\n${YELLOW}Custom Commands:${NC}"
    command -v cheat >/dev/null && echo "âœ… cheat menu" || echo "âŒ cheat menu"
    type mkcd >/dev/null 2>&1 && echo "âœ… mkcd function" || echo "âŒ mkcd"
    type z >/dev/null 2>&1 && echo "âœ… z (zoxide)" || echo "âŒ z"
    
    echo -e "\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    
    # Count results
    TOTAL=$(( $(echo -e "$output" | grep -c "âœ…") + $(echo -e "$output" | grep -c "âŒ") ))
    PASSED=$(echo -e "$output" | grep -c "âœ…")
    
    echo -e "${GREEN}Setup Status: Excellent!${NC}"
    echo "Most tools are installed and configured."
    
    echo ""
    gum input --placeholder "Press enter to continue..."
}

# Handle command line arguments
if [[ $# -gt 0 ]]; then
    show_menu "$@"
    exit 0
fi

# Start with welcome if first run
show_welcome

# Text-only versions for fallback mode
show_ghostty_shortcuts_text() {
    echo "ğŸ® GHOSTTY SHORTCUTS"
    echo "===================="
    echo ""
    echo "ğŸš€ QUICK TERMINAL"
    echo "Cmd+\`         â†’ Toggle quick terminal (ANYWHERE!)"
    echo ""
    echo "ğŸ“ SPLITS & TABS"
    echo "Cmd+D         â†’ Split right"
    echo "Cmd+Shift+D   â†’ Split down"
    echo "Cmd+T         â†’ New tab"
    echo "Cmd+W         â†’ Close current"
    echo ""
    echo "ğŸ¯ NAVIGATION"
    echo "Cmd+â†/â†’/â†‘/â†“   â†’ Navigate splits"
    echo "Cmd+H/J/K/L   â†’ Navigate (vim style)"
}

show_git_commands_text() {
    echo "ğŸ”¥ GIT COMMANDS"
    echo "==============="
    echo ""
    echo "ğŸ¯ VISUAL TOOLS"
    echo "lazygit       â†’ Full git UI (BEST!)"
    echo ""
    echo "âš¡ YOUR SHORTCUTS"
    echo "gs   â†’ git status        gp   â†’ git push"
    echo "ga   â†’ git add          gpl  â†’ git pull"
    echo "gaa  â†’ git add .        gco  â†’ git checkout"
    echo "gc   â†’ git commit       gb   â†’ git branch"
    echo "gcm  â†’ git commit -m    glog â†’ pretty git log"
}

show_modern_tools_text() {
    echo "ğŸŒŸ MODERN CLI REPLACEMENTS"
    echo "=========================="
    echo ""
    echo "OLD â†’ NEW"
    echo "cat   â†’ bat      (syntax highlighting!)"
    echo "ls    â†’ eza      (icons + git status!)"
    echo "find  â†’ fd       (5x faster!)"
    echo "grep  â†’ rg       (ripgrep - blazing fast!)"
    echo "cd    â†’ z        (smart jumps!)"
    echo "top   â†’ btop     (beautiful graphs!)"
}

show_functions_aliases_text() {
    echo "ğŸ“ CUSTOM FUNCTIONS & ALIASES"
    echo "============================="
    echo ""
    echo "ğŸš€ QUICK SHORTCUTS"
    echo "reload    â†’ Reload your terminal config"
    echo "zshrc     â†’ Edit your .zshrc"
    echo "mkcd      â†’ Make directory AND enter it"
    echo "backup    â†’ Backup file with timestamp"
    echo "extract   â†’ Extract ANY archive type"
    echo "ginit     â†’ Start git repo with .gitignore"
}

show_svelte_dev_text() {
    echo "ğŸš€ SVELTE DEVELOPMENT"
    echo "===================="
    echo ""
    echo "ğŸ“¦ PROJECT STARTERS"
    echo "sv        â†’ Create Vite + Svelte app"
    echo "svkit     â†’ Create SvelteKit app"
    echo ""
    echo "âš¡ DEVELOPMENT SHORTCUTS"
    echo "dev       â†’ npm run dev"
    echo "build     â†’ npm run build"
    echo "preview   â†’ npm run preview"
}

test_setup_text() {
    echo "ğŸ§ª TESTING SETUP"
    echo "================"
    echo ""
    echo "Essential Tools:"
    command -v brew >/dev/null && echo "âœ… Homebrew" || echo "âŒ Homebrew"
    command -v git >/dev/null && echo "âœ… Git" || echo "âŒ Git"
    command -v zsh >/dev/null && echo "âœ… Zsh" || echo "âŒ Zsh"
    echo ""
    echo "Modern CLI Tools:"
    command -v bat >/dev/null && echo "âœ… bat" || echo "âŒ bat"
    command -v eza >/dev/null && echo "âœ… eza" || echo "âŒ eza"
    command -v fzf >/dev/null && echo "âœ… fzf" || echo "âŒ fzf"
    command -v lazygit >/dev/null && echo "âœ… lazygit" || echo "âŒ lazygit"
}

# Missing functions that were referenced in menu
show_tmux_commands() {
    if ! check_interactive; then
        echo "ğŸ¹ TMUX-STYLE COMMANDS"
        echo "======================"
        echo "Note: This is a placeholder. Ghostty doesn't use tmux-style commands."
        echo "Use Ghostty shortcuts instead (run: cheat ghostty)"
        return
    fi
    
    gum style \
        --border double \
        --border-foreground 214 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ¹ TMUX-STYLE COMMANDS
        
Note: Ghostty doesn't use tmux-style commands.
Instead, it has built-in split and tab management.

Use these Ghostty shortcuts:
Cmd+D         â†’ Split right
Cmd+Shift+D   â†’ Split down
Cmd+T         â†’ New tab
Cmd+W         â†’ Close current

For traditional tmux, install with: brew install tmux"
}

show_file_navigation() {
    if ! check_interactive; then
        echo "ğŸ“ FILE NAVIGATION"
        echo "=================="
        echo "z <folder>   â†’ Jump to any folder (zoxide)"
        echo "..           â†’ Go up one directory"
        echo "...          â†’ Go up two directories"
        echo "Ctrl+T       â†’ Find files with fzf"
        echo "Ctrl+F       â†’ Find and edit files"
        return
    fi
    
    gum style \
        --border double \
        --border-foreground 87 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ“ FILE NAVIGATION MASTERY

ğŸš€ SMART NAVIGATION
z <folder>    â†’ Jump to any folder instantly
zi            â†’ Interactive directory picker
..            â†’ Go up one directory
...           â†’ Go up two directories
-             â†’ Go back to previous directory

ğŸ” FINDING FILES
Ctrl+T        â†’ Find files with preview
Ctrl+F        â†’ Find and edit files
fd <pattern>  â†’ Fast file search
find . -name  â†’ Traditional search

ğŸ“‚ DIRECTORY OPERATIONS
mkcd <name>   â†’ Create and enter directory
ls / eza      â†’ List with icons and git status
tree / lt     â†’ Show directory tree

ğŸ’¡ PRO TIPS
â€¢ Use 'z' instead of 'cd' - it learns your habits!
â€¢ Press Tab for auto-completion
â€¢ Use wildcards: *.txt, **/*.js"
}

show_system_tools() {
    if ! check_interactive; then
        echo "ğŸ› ï¸ SYSTEM MONITORING"
        echo "===================="
        echo "btop         â†’ Beautiful system monitor"
        echo "duf          â†’ Disk usage (better df)"
        echo "dust         â†’ Directory usage (better du)"
        echo "procs        â†’ Process viewer (better ps)"
        return
    fi
    
    gum style \
        --border double \
        --border-foreground 208 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ› ï¸ SYSTEM MONITORING & TOOLS

ğŸ“Š SYSTEM MONITORING
btop          â†’ Beautiful system monitor (best!)
top/htop      â†’ Falls back to btop
activity monitor â†’ macOS built-in

ğŸ’¾ DISK & STORAGE
duf           â†’ Disk usage (colorful df)
dust          â†’ Directory usage (visual du)
ncdu          â†’ Interactive disk usage

ğŸ” PROCESS MANAGEMENT
procs         â†’ Modern process viewer
ps aux        â†’ Traditional process list
Ctrl+P        â†’ Interactive process killer

ğŸŒ NETWORK TOOLS
ports         â†’ Show listening ports
myip          â†’ Your public IP
localip       â†’ Your local IP
ping/gping    â†’ Network connectivity

âš¡ PERFORMANCE
bench <cmd>   â†’ Benchmark any command
time <cmd>    â†’ Time command execution"
}

show_image_tools() {
    if ! check_interactive; then
        echo "ğŸ–¼ï¸ IMAGE & MEDIA TOOLS"
        echo "====================="
        echo "Note: Install additional tools with brew"
        echo "brew install imagemagick ffmpeg"
        return
    fi
    
    gum style \
        --border double \
        --border-foreground 205 \
        --padding "1 2" \
        --margin "1" \
        "ğŸ–¼ï¸ IMAGE & MEDIA TOOLS

ğŸ“¸ IMAGE PROCESSING
convert       â†’ ImageMagick (install: brew install imagemagick)
sips          â†’ macOS built-in image tool
preview       â†’ Open in Preview app

ğŸµ AUDIO/VIDEO
ffmpeg        â†’ Swiss army knife (install: brew install ffmpeg)
cava          â†’ Audio visualizer
play          â†’ Audio playback

ğŸ“± SCREENSHOTS
screencapture â†’ macOS built-in
Cmd+Shift+3   â†’ Full screen screenshot
Cmd+Shift+4   â†’ Select area screenshot
Cmd+Shift+5   â†’ Screenshot options

ğŸ¨ FUN VISUAL
neofetch      â†’ System info with logo
asciiquarium  â†’ Terminal aquarium
cmatrix       â†’ Matrix rain effect

ğŸ’¡ INSTALL MORE TOOLS
brew install imagemagick ffmpeg youtube-dl
brew install --cask vlc handbrake"
}

show_terminal_shortcuts() {
    if ! check_interactive; then
        echo "âŒ¨ï¸ TERMINAL SHORTCUTS"
        echo "===================="
        echo "Ctrl+C       â†’ Cancel current command"
        echo "Ctrl+D       â†’ Exit/logout"
        echo "Ctrl+L       â†’ Clear screen"
        echo "Ctrl+R       â†’ Search history"
        echo "Ctrl+A       â†’ Beginning of line"
        echo "Ctrl+E       â†’ End of line"
        return
    fi
    
    gum style \
        --border double \
        --border-foreground 99 \
        --padding "1 2" \
        --margin "1" \
        "âŒ¨ï¸ TERMINAL SHORTCUTS & KEYBINDINGS

ğŸ¯ CURSOR MOVEMENT
Ctrl+A        â†’ Beginning of line
Ctrl+E        â†’ End of line
Alt+F         â†’ Forward one word
Alt+B         â†’ Back one word

âœ‚ï¸ EDITING
Ctrl+U        â†’ Delete to beginning
Ctrl+K        â†’ Delete to end
Ctrl+W        â†’ Delete word backward
Alt+D         â†’ Delete word forward

ğŸ“ CONTROL
Ctrl+C        â†’ Cancel command
Ctrl+D        â†’ Exit/logout
Ctrl+Z        â†’ Suspend process
Ctrl+L        â†’ Clear screen

ğŸ” HISTORY
Ctrl+R        â†’ Search history (fuzzy!)
â†‘/â†“           â†’ Navigate history with context
!!            â†’ Repeat last command
!<text>       â†’ Run last command starting with text

âš¡ CUSTOM SHORTCUTS (Your Setup)
Ctrl+F        â†’ Find and edit files
Ctrl+G        â†’ Interactive git status
Ctrl+P        â†’ Process manager
Ctrl+T        â†’ Find files
Alt+C         â†’ Change directory
Alt+D         â†’ Directory jumper (zi)"
}

search_cheatsheet() {
    if ! check_interactive; then
        echo "Enter search term: "
        read -r term
        if [ -f ~/terminal-cheatsheet.md ]; then
            grep -i "$term" ~/terminal-cheatsheet.md
        else
            echo "Cheatsheet not found at ~/terminal-cheatsheet.md"
        fi
        return
    fi
    
    PATTERN=$(gum input --placeholder "Search term...")
    if [ -n "$PATTERN" ]; then
        echo "Searching cheatsheet for '$PATTERN'..."
        if [ -f ~/terminal-cheatsheet.md ]; then
            grep -i "$PATTERN" ~/terminal-cheatsheet.md --color=always | head -20
        else
            echo "Cheatsheet not found. Create ~/terminal-cheatsheet.md first!"
        fi
    fi
}

tutorial_eza() {
    if ! check_interactive; then
        echo "ğŸ“ EZA TUTORIAL"
        echo "=============="
        echo "eza --icons           â†’ List with icons"
        echo "eza -la --git         â†’ Long format with git status"
        echo "eza --tree --level=2  â†’ Tree view"
        return
    fi
    
    clear
    gum style \
        --border rounded \
        --border-foreground 87 \
        --padding "1 2" \
        "ğŸ¨ EZA MASTERY - BEAUTIFUL FILE LISTING

Eza is your modern replacement for ls!

BASIC USAGE:
eza           â†’ Simple listing
eza --icons   â†’ With beautiful icons
eza -la       â†’ Long format with all files
eza --git     â†’ Show git status

TREE MODE:
eza --tree    â†’ Show as tree
eza --tree --level=2 â†’ Limit depth
lt            â†’ Your alias for tree view

ADVANCED:
eza -la --git --icons --group-directories-first
eza --sort=modified --reverse
eza --only-dirs   â†’ Only directories"
    
    echo ""
    gum confirm "Want to see a demo?" && {
        echo "Current directory with eza:"
        eza --icons --git -la | head -10
    }
}

tutorial_navigation() {
    if ! check_interactive; then
        echo "âš¡ NAVIGATION TUTORIAL"
        echo "===================="
        echo "Use z, .., fzf, and custom shortcuts for faster navigation"
        return
    fi
    
    clear
    gum style \
        --border rounded \
        --border-foreground 214 \
        --padding "1 2" \
        "âš¡ MASTER TERMINAL NAVIGATION

LESSON 1: Smart Directory Jumping
z <partial>   â†’ Jump to any visited directory
zi            â†’ Interactive picker
z -           â†’ Go back

LESSON 2: Quick Navigation
..    â†’ Up one level
...   â†’ Up two levels
-     â†’ Previous directory
~     â†’ Home directory

LESSON 3: Finding & Moving
Ctrl+T â†’ Find files, then navigate to folder
Alt+C  â†’ Change directory with fzf
fd -t d | fzf â†’ Find directories

LESSON 4: Bookmarks (with zoxide)
Your most visited directories are automatically tracked!
Type 'z' followed by any part of a folder name."
}

# Start the menu
show_menu
